{
  "active": false,
  "connections": {
    "Posta no Yotube": {
      "main": [
        []
      ]
    },
    "Criador de títulos": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Start Workflow": {
      "main": [
        [
          {
            "node": "2. Configurar IDs das Pastas",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Listar Arquivos de Vídeo": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Configurar Pasta Vídeo (ID)": {
      "main": [
        [
          {
            "node": "Listar Arquivos de Vídeo",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Configurar Pasta Música (ID)": {
      "main": [
        [
          {
            "node": "Listar Arquivos de Música",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Baixar Vídeo Localmente": {
      "main": [
        [
          {
            "node": "Salvar Vídeo no Disco",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Baixar Música Localmente": {
      "main": [
        [
          {
            "node": "Salvar Música no Disco",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Salvar Vídeo no Disco": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Salvar Música no Disco": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "FFmpeg: Juntar Vídeo e Música": {
      "main": [
        [
          {
            "node": "Ler Arquivo Final",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ler Arquivo Final": {
      "main": [
        [
          {
            "node": "Posta no Yotube",
            "type": "main",
            "index": 0
          },
          {
            "node": "Upload para Google Drive",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload para Google Drive": {
      "main": [
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "FFmpeg: Juntar Vídeo e Música",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete a file": {
      "main": [
        [
          {
            "node": "Limpeza de Arquivos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Delete a file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Listar Arquivos de Música": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Criador de títulos",
            "type": "main",
            "index": 0
          },
          {
            "node": "Baixar Vídeo Localmente",
            "type": "main",
            "index": 0
          },
          {
            "node": "Baixar Música Localmente",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "2. Configurar IDs das Pastas": {
      "main": [
        [
          {
            "node": "3. Listar Vídeos",
            "type": "main",
            "index": 0
          },
          {
            "node": "4. Listar Músicas",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "3. Listar Vídeos": {
      "main": [
        [
          {
            "node": "5. Agregar Dados e Selecionar Aleatório",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "4. Listar Músicas": {
      "main": [
        [
          {
            "node": "5. Agregar Dados e Selecionar Aleatório",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge2": {
      "main": [
        []
      ]
    }
  },
  "createdAt": "2025-11-12T09:41:10.828Z",
  "id": "DPbThiF86QzUOEq6",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "Posta Yt e Tk: Valeriabpr",
  "nodes": [
    {
      "parameters": {
        "resource": "video",
        "operation": "upload",
        "title": "={{ $item(\"0\").$node[\"Organiza o título e descrição\"].json[\"titulo\"] }}",
        "regionCode": "BR",
        "categoryId": "22",
        "options": {
          "privacyStatus": "public"
        }
      },
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [
        2208,
        1312
      ],
      "id": "72f6ebda-1acf-4bfd-89a5-8679b58bd207",
      "name": "Posta no Yotube",
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "NoM1GLG7CPUc2OGD",
          "name": "Sensacion IA"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "https://docs.google.com/spreadsheets/d/1AKsN7WLrQMz2BB8xzcoDMBhde6Hg1sCGzNPfj90RjfI/edit?usp=drive_link",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Sheet1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1-US2yqAEMPGy0fT-r2rZRIAFN-RTnHuvvAT6Uw6v9-M/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Video": "=https://drive.google.com/uc?export=download&id={{ $json.id }}",
            "Titulo": "={{ $item(\"0\").$node[\"Organiza o título e descrição\"].json[\"titulo\"] }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Video",
              "displayName": "Video",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Titulo",
              "displayName": "Titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        2512,
        1536
      ],
      "id": "b88d1500-d36e-4e62-8b41-e684080a96b0",
      "name": "Append row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "2zA5xm2J8G6YQave",
          "name": "lucasrodrigues.contato"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=voce é um assistente que cria títulos e descrição para o vídeo: {{ $json.name }}\n\nUtilze técnicas de SEO. Você está produzindo os títulos para as redes sensacion ia. Historias emocionantes, historias eengraçadas, videos realistas. Até 60 caracteres, mas prefira títulos breves. Insira até 3 hashtahs bem posicionadas no final do título. \n\nvocê retorna uma lista assim:\n\n{\ntítulo: xxx xxx xxx\n};\n{\ndescrição: xxxxxxx xxxxxxx\nxxxxxx\n};\n"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        864,
        1152
      ],
      "id": "e4ff261f-a674-4232-ad42-7732224f9aa4",
      "name": "Criador de títulos",
      "credentials": {
        "openAiApi": {
          "id": "9tAaYio9SqQQ0jDd",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {},
      "id": "3c2d46bc-361f-4e2d-bf40-58eb3f675f02",
      "name": "Start Workflow",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        -1360,
        2928
      ],
      "typeVersion": 1,
      "notes": "Gatilho manual para iniciar a automação."
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "filter": {
          "folderId": {
            "__rl": true,
            "value": "={{ $json.VideoFolderID }}",
            "mode": "id"
          }
        },
        "options": {
          "fields": [
            "id",
            "name"
          ]
        }
      },
      "id": "d848f74e-cae8-42d9-b9e6-856ef1f22372",
      "name": "Listar Arquivos de Vídeo",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        -704,
        1440
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "s0DTtEIAh2oPOvzG",
          "name": "lucasrodrigues.contato"
        }
      },
      "notes": "Lista todos os arquivos dentro da pasta de vídeos, recuperando metadados."
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.VideoFileID }}",
          "mode": "id"
        },
        "options": {
          "binaryPropertyName": "datavideo.mp4",
          "fileName": "datavideo.mp4"
        }
      },
      "id": "404ffe46-075a-423e-a27b-6eda2ec8ed92",
      "name": "Baixar Vídeo Localmente",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        832,
        1392
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "gmyjZBB9GGHcObPq",
          "name": "Personavital(Sombra Policial)"
        }
      },
      "notes": "Baixa o arquivo de vídeo selecionado, armazenando-o como dado binário (`video_binary`) [7]."
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.MusicFileID }}",
          "mode": "id"
        },
        "options": {
          "binaryPropertyName": "datamusica.mp3",
          "fileName": "datamusica.mp3"
        }
      },
      "id": "0d74db48-e750-44e2-9cf3-8db1bbd19703",
      "name": "Baixar Música Localmente",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        816,
        1648
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "gmyjZBB9GGHcObPq",
          "name": "Personavital(Sombra Policial)"
        }
      },
      "notes": "Baixa o arquivo de música selecionado, armazenando-o como dado binário (`music_binary`) [8]."
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "video_input.mp4",
        "dataPropertyName": "datavideo.mp4",
        "options": {}
      },
      "id": "d9a93025-ba94-457b-8748-a800c2dc16e2",
      "name": "Salvar Vídeo no Disco",
      "type": "n8n-nodes-base.readWriteFile",
      "position": [
        1040,
        1392
      ],
      "typeVersion": 1,
      "notes": "Escreve o vídeo baixado no disco local com o nome fixo 'video_input.mp4' [9]."
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "music_input.mp3",
        "dataPropertyName": "datamusica.mp3",
        "options": {
          "append": false
        }
      },
      "id": "f54b4dc6-fc05-4504-bd34-e234febe30eb",
      "name": "Salvar Música no Disco",
      "type": "n8n-nodes-base.readWriteFile",
      "position": [
        1008,
        1648
      ],
      "typeVersion": 1,
      "notes": "Escreve a música baixada no disco local com o nome fixo 'music_input.mp3' [9]."
    },
    {
      "parameters": {
        "command": "ffmpeg -i video_input.mp4 -i music_input.mp3 \\\n-filter_complex \"[1:a]volume=0.14[music];[0:a][music]amix=inputs=2:duration=first:dropout_transition=3[a]\" \\\n-map 0:v -map \"[a]\" -c:v copy -c:a aac -b:a 192k -shortest output_final.mp4 -y\n"
      },
      "id": "fed3c60c-e525-4d1b-b324-b4a119bbc32b",
      "name": "FFmpeg: Juntar Vídeo e Música",
      "type": "n8n-nodes-base.executeCommand",
      "position": [
        1600,
        1536
      ],
      "typeVersion": 1,
      "notes": "Executa o FFmpeg. O comando junta o vídeo e a música (`-map`), usa `-shortest` para garantir que o clipe final tenha a duração do vídeo (conforme solicitado), e codifica em MP4. Usa o nome de saída 'output_final.mp4' [10, 11]."
    },
    {
      "parameters": {
        "fileSelector": "output_final.mp4",
        "options": {}
      },
      "id": "2fbe30ee-a060-44ac-a942-a33113631301",
      "name": "Ler Arquivo Final",
      "type": "n8n-nodes-base.readWriteFile",
      "position": [
        1872,
        1536
      ],
      "typeVersion": 1,
      "notes": "Lê o 'output_final.mp4' do disco e o converte em um item binário (`data`) para o próximo nó de upload [12]."
    },
    {
      "parameters": {
        "name": "outputfinal.mp4",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "root",
          "mode": "list",
          "cachedResultName": "/ (Root folder)",
          "cachedResultUrl": "https://drive.google.com/drive"
        },
        "options": {}
      },
      "id": "f0dcf3b3-b9fb-4540-b4c5-e1a4b69cd7b5",
      "name": "Upload para Google Drive",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        2192,
        1536
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "MB2lyzzGrdOv9wkh",
          "name": "Valeriabpr"
        }
      },
      "notes": "Faz o upload do arquivo binário final para o Google Drive. O nome do arquivo é gerado dinamicamente com um carimbo de data/hora."
    },
    {
      "parameters": {
        "command": "rm datavideo.mp4 datamusica.mp3 output_final.mp4"
      },
      "id": "bdda3273-1bd9-4058-bdad-5d7aea0d20a3",
      "name": "Limpeza de Arquivos",
      "type": "n8n-nodes-base.executeCommand",
      "position": [
        3296,
        1536
      ],
      "typeVersion": 1,
      "notes": "Deleta todos os arquivos temporários criados no disco local para limpar o ambiente (`rm` comando) [13, 14]."
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "video_folder_id",
              "name": "VideoFolderID",
              "type": "string",
              "value": "1h43A7rzc_ckKH3ot8ymntIp4SFjuRz0t"
            }
          ]
        },
        "options": {}
      },
      "id": "f71d1a89-f688-4d4b-8c81-2ff30a7b825d",
      "name": "Configurar Pasta Vídeo (ID)",
      "type": "n8n-nodes-base.set",
      "position": [
        -960,
        1440
      ],
      "typeVersion": 3.4,
      "notes": "Defina o ID da pasta do Google Drive contendo os vídeos de fundo. **Ajuste este valor**."
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "music_folder_id",
              "name": "MusicFolderID",
              "type": "string",
              "value": "12T6ABEuR7WlZ2i88GqcB3U4DmuKVM4iR"
            }
          ]
        },
        "options": {}
      },
      "id": "64d42e6f-c4a6-4d83-ae11-d38c1fee15aa",
      "name": "Configurar Pasta Música (ID)",
      "type": "n8n-nodes-base.set",
      "position": [
        -960,
        1648
      ],
      "typeVersion": 3.4,
      "notes": "Defina o ID da pasta do Google Drive contendo as músicas. **Ajuste este valor**."
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -432,
        1552
      ],
      "id": "1cef01fa-7e6c-46f2-844e-41cb6a9c8161",
      "name": "Merge"
    },
    {
      "parameters": {
        "numberInputs": 3
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        1344,
        1520
      ],
      "id": "7ab5ea71-14b0-4b52-b744-e4c796bd054b",
      "name": "Merge1"
    },
    {
      "parameters": {
        "operation": "deleteFile",
        "fileId": {
          "__rl": true,
          "mode": "list",
          "value": ""
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        3040,
        1536
      ],
      "id": "77cdf0cb-4e9f-420c-ab86-9049e9d02ce5",
      "name": "Delete a file",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "MB2lyzzGrdOv9wkh",
          "name": "Valeriabpr"
        }
      }
    },
    {
      "parameters": {
        "amount": 1,
        "unit": "minutes"
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        2768,
        1536
      ],
      "id": "37b7122a-bbeb-462e-9990-6a55ffef1f59",
      "name": "Wait",
      "webhookId": "608e1b2d-ad10-4730-902b-b0b572bf8c0e"
    },
    {
      "parameters": {
        "jsCode": "const videos = $node[\"Listar Arquivos de Vídeo\"].json;\nconst musicas = $node[\"Listar Arquivos de Música\"].json;\n\nif (videos.length === 0) throw new Error(\"Nenhum vídeo encontrado!\");\nif (musicas.length === 0) throw new Error(\"Nenhuma música encontrada!\");\n\nconst videoIndex = Math.floor(Math.random() * videos.length);\nconst musicIndex = Math.floor(Math.random() * musicas.length);\n\nconst videoSelecionado = videos[videoIndex];\nconst musicaSelecionada = musicas[musicIndex];\n\nreturn [\n  {\n    VideoFileID: videoSelecionado.id,\n    VideoFileName: videoSelecionado.name,\n    MusicFileID: musicaSelecionada.id\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -112,
        1552
      ],
      "id": "a04b21d4-9536-4211-8fed-2e9b1c939449",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "filter": {
          "folderId": {
            "__rl": true,
            "value": "={{ $json.MusicFolderID }}",
            "mode": "id"
          }
        },
        "options": {
          "fields": [
            "id",
            "name"
          ]
        }
      },
      "id": "ca5c77f3-d5d5-4639-9aa8-0bbc39abfafa",
      "name": "Listar Arquivos de Música",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        -704,
        1648
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "MB2lyzzGrdOv9wkh",
          "name": "Valeriabpr"
        }
      },
      "notes": "Lista todos os arquivos dentro da pasta de vídeos, recuperando metadados."
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "video_folder_id_param",
              "name": "VideoFolderID",
              "type": "string",
              "value": "1h43A7rzc_ckKH3ot8ymntIp4SFjuRz0t"
            },
            {
              "id": "music_folder_id_param",
              "name": "MusicFolderID",
              "type": "string",
              "value": "12T6ABEuR7WlZ2i88GqcB3U4DmuKVM4iR"
            },
            {
              "id": "output_folder_id_param",
              "name": "OutputFolderID",
              "type": "string",
              "value": "1lkzzAjKXY5M6E2hhFgFZQXaJBbCZiFO0"
            }
          ]
        },
        "options": {}
      },
      "id": "ede9c1fa-2411-4143-be78-8f737db31b93",
      "name": "2. Configurar IDs das Pastas",
      "type": "n8n-nodes-base.set",
      "position": [
        -1104,
        2928
      ],
      "typeVersion": 3.4,
      "notes": "Define os IDs das pastas do Google Drive. **Ajustar estes valores.**"
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "queryString": "=",
        "limit": 10,
        "filter": {
          "folderId": {
            "__rl": true,
            "value": "={{ $json.VideoFolderID }}",
            "mode": "id"
          }
        },
        "options": {
          "fields": [
            "id",
            "name"
          ]
        }
      },
      "id": "cbd32aee-7daf-4813-9784-ba96b4821190",
      "name": "3. Listar Vídeos",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        -800,
        2816
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "MB2lyzzGrdOv9wkh",
          "name": "Valeriabpr"
        }
      },
      "notes": "Lista os vídeos disponíveis na pasta de origem."
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "queryString": "=",
        "limit": 10,
        "filter": {
          "folderId": {
            "__rl": true,
            "value": "={{ $json.MusicFolderID }}",
            "mode": "id"
          }
        },
        "options": {
          "fields": [
            "id"
          ]
        }
      },
      "id": "76d4f771-8ede-4172-bb4d-0d9dbd11c9eb",
      "name": "4. Listar Músicas",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        -800,
        3024
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "MB2lyzzGrdOv9wkh",
          "name": "Valeriabpr"
        }
      },
      "notes": "Lista as músicas disponíveis na pasta de música."
    },
    {
      "parameters": {
        "jsCode": "const videoItems = $input.item.nodes['3. Listar Vídeos'].json;\nconst musicItems = $input.item.nodes['4. Listar Músicas'].json;\n\nfunction getRandomItem(arr) {\n    if (!arr || arr.length === 0) return null;\n    return arr[Math.floor(Math.random() * arr.length)];\n}\n\nconst selectedVideo = getRandomItem(videoItems);\nconst selectedMusic = getRandomItem(musicItems);\n\nif (!selectedVideo || !selectedMusic) {\n    throw new Error(\"Não foi possível selecionar arquivos aleatórios.\");\n}\n\nreturn [{\n    json: {\n        VideoFileID: selectedVideo.id,\n        VideoFileName: selectedVideo.name,\n        MusicFileID: selectedMusic.id,\n        MusicFileName: selectedMusic.name\n    }\n}];"
      },
      "id": "c8322d4c-e847-4788-8ed6-bf9d74d9c8ea",
      "name": "5. Agregar Dados e Selecionar Aleatório",
      "type": "n8n-nodes-base.code",
      "position": [
        -384,
        2912
      ],
      "typeVersion": 2,
      "notes": "Agrega os resultados das listas e seleciona um vídeo e uma música aleatórios (similar ao uso de `Math.random()` em [1-4]). Guarda o ID e o Nome Original do vídeo."
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('aggregate_data').item.json.VideoFileID }}"
        },
        "options": {
          "binaryPropertyName": "video_binary"
        }
      },
      "id": "f892b55a-0450-401a-abb7-aee4ed6b67f6",
      "name": "6. Baixar Vídeo",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        0,
        2768
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "MB2lyzzGrdOv9wkh",
          "name": "Valeriabpr"
        }
      },
      "notes": "Baixa o vídeo de origem selecionado como binário (`video_binary`)."
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('aggregate_data').item.json.MusicFileID }}"
        },
        "options": {
          "binaryPropertyName": "music_binary"
        }
      },
      "id": "0b90e85e-2790-4595-b876-91c136e1f83e",
      "name": "7. Baixar Música",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        0,
        2976
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "MB2lyzzGrdOv9wkh",
          "name": "Valeriabpr"
        }
      },
      "notes": "Baixa a música selecionada como binário (`music_binary`)."
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "video_input.mp4",
        "options": {}
      },
      "id": "f8ca6c07-794a-422d-91f4-da15d6bc70f2",
      "name": "8. Salvar Vídeo Local (video.mp4)",
      "type": "n8n-nodes-base.readWriteFile",
      "position": [
        208,
        2768
      ],
      "typeVersion": 1,
      "notes": "Persiste o vídeo de entrada no disco local (similar ao uso de `/tmp/` em [5])."
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "music_input.mp3",
        "options": {}
      },
      "id": "1c97b996-0e1e-4e29-80a3-1d9b6e6ac550",
      "name": "9. Salvar Música Local (music.mp3)",
      "type": "n8n-nodes-base.readWriteFile",
      "position": [
        208,
        2976
      ],
      "typeVersion": 1,
      "notes": "Persiste a música de entrada no disco local."
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ai_title",
              "name": "AITitle",
              "type": "string",
              "value": "=Título gerado pela AI para: {{ $('aggregate_data').item.json.VideoFileName }}"
            },
            {
              "id": "final_output_name",
              "name": "FinalOutputName",
              "type": "string",
              "value": "Final_{{ $datetime(\"now\").format(\"YYYYMMDD_HHmmss\") }}.mp4"
            }
          ]
        },
        "options": {}
      },
      "id": "7b98cea9-22c6-4ba3-bfb2-f52f39f4fd63",
      "name": "10. AI: Gerar Título e Nome Final",
      "type": "n8n-nodes-base.set",
      "position": [
        416,
        2880
      ],
      "typeVersion": 3.4,
      "notes": "Simula a chamada a um agente OpenAI. O nome do vídeo de origem é passado para gerar um 'AITitle' e um nome de arquivo de saída único é criado (similar à geração de nomes aleatórios em [6, 7])."
    },
    {
      "parameters": {
        "command": "ffmpeg -i video_input.mp4 -i music_input.mp3 -map 0:v:0 -map 1:a:0 -c:v copy -c:a aac -b:a 192k -shortest {{ $('ai_title_generation').item.json.FinalOutputName }} -y"
      },
      "id": "8c37a372-d228-46fe-bdee-8ee748324319",
      "name": "11. FFmpeg: Juntar e Cortar",
      "type": "n8n-nodes-base.executeCommand",
      "position": [
        608,
        2880
      ],
      "typeVersion": 1,
      "notes": "Executa o FFmpeg. Utiliza `-shortest` para garantir que o clipe final tenha a duração exata do vídeo de entrada (`video_input.mp4`)."
    },
    {
      "parameters": {
        "fileSelector": "={{ $('ai_title_generation').item.json.FinalOutputName }}",
        "options": {}
      },
      "id": "96812605-0e05-42e1-99ab-58fbda9a183b",
      "name": "12. Ler Arquivo Final",
      "type": "n8n-nodes-base.readWriteFile",
      "position": [
        800,
        2880
      ],
      "typeVersion": 1,
      "notes": "Lê o arquivo de vídeo editado do disco local, preparando-o como dado binário (`data`) para o upload."
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "operation": "upload"
      },
      "id": "6abfaa70-9ced-41b7-9c84-0e34fe9a6654",
      "name": "13. Upload para Google Drive",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        1008,
        2880
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "MB2lyzzGrdOv9wkh",
          "name": "Valeriabpr"
        }
      },
      "notes": "Faz o upload do vídeo final editado para a pasta de saída no Google Drive e retorna os metadados, incluindo o ID do novo arquivo."
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "mode": "id",
          "value": "ID_DA_SUA_PLANILHA_DE_LOGS"
        },
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": 123456,
          "cachedResultName": "Logs_Edicao"
        },
        "columns": {
          "value": {
            "ID_Drive_Editado": "={{ $json.id }}",
            "Titulo_AI": "={{ $('ai_title_generation').item.json.AITitle }}",
            "Nome_Original": "={{ $('aggregate_data').item.json.VideoFileName }}"
          },
          "schema": [
            {
              "id": "ID_Drive_Editado",
              "type": "string",
              "displayName": "ID_Drive_Editado",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Titulo_AI",
              "type": "string",
              "displayName": "Titulo_AI",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Nome_Original",
              "type": "string",
              "displayName": "Nome_Original",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow"
        },
        "options": {}
      },
      "id": "e43afe2c-65d0-4a3e-b1e1-aa37dc0d6900",
      "name": "14. Planilha: Registrar Título e ID do Drive",
      "type": "n8n-nodes-base.googleSheets",
      "position": [
        1200,
        2880
      ],
      "typeVersion": 4.6,
      "notes": "Insere o título gerado pela IA e o ID do arquivo editado no Google Drive na planilha de logs. **Ajustar o ID da Planilha.**"
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "operation": "delete"
      },
      "id": "946c2e13-e5d5-4456-a798-a00bc4ad3a39",
      "name": "15. Deletar Vídeo Original do Drive",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        1408,
        2768
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "MB2lyzzGrdOv9wkh",
          "name": "Valeriabpr"
        }
      },
      "notes": "Remove o arquivo de vídeo original (não editado) do Google Drive, usando o ID capturado na etapa 5."
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "operation": "delete"
      },
      "id": "a49a5f5b-83be-4dfa-b7d6-ce44943c31a0",
      "name": "16. Deletar Vídeo Editado do Drive",
      "type": "n8n-nodes-base.googleDrive",
      "position": [
        1408,
        2976
      ],
      "typeVersion": 3,
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "MB2lyzzGrdOv9wkh",
          "name": "Valeriabpr"
        }
      },
      "notes": "Remove o arquivo de vídeo editado que acabou de ser carregado do Google Drive, usando o ID retornado pelo nó de upload. (Se for para manter o vídeo editado, basta remover este nó)."
    },
    {
      "parameters": {
        "command": "rm video_input.mp4 music_input.mp3 {{ $('ai_title_generation').item.json.FinalOutputName }}"
      },
      "id": "3c524852-e2de-4b0f-bee9-050b61f915f3",
      "name": "17. Limpeza Local",
      "type": "n8n-nodes-base.executeCommand",
      "position": [
        1600,
        2880
      ],
      "typeVersion": 1,
      "notes": "Deleta os arquivos temporários criados no disco local (`rm` comando), garantindo a limpeza do ambiente de execução."
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -448,
        3184
      ],
      "id": "c9865d14-70d0-4ed2-b097-eff8c7b9508b",
      "name": "Merge2"
    }
  ],
  "pinData": {},
  "settings": {
    "executionOrder": "v1",
    "timezone": "America/Sao_Paulo",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false
  },
  "shared": [
    {
      "updatedAt": "2025-11-12T09:41:10.829Z",
      "createdAt": "2025-11-12T09:41:10.829Z",
      "role": "workflow:owner",
      "workflowId": "DPbThiF86QzUOEq6",
      "projectId": "NmjiBPxycE3xYO0z"
    }
  ],
  "staticData": {
    "node:Schedule Trigger": {
      "recurrenceRules": []
    }
  },
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2025-11-25T20:21:35.000Z",
  "versionId": "887ed73c-8b7d-4076-ae14-95f316cfbc15"
}